{% extends 'base.html' %}
{% load static %}

{% block title %} Home {% endblock title %}

{% block css_file %}

<link rel="stylesheet" href="  {% static 'app.css' %}  ">
{% endblock css_file %}

{% block scripts %}


{% endblock scripts %}

{% block body %} 




{% include 'analyzer_app/includes/navbar.html' %}

<div class = "space">
    
</div>
<div class="chart-container d-flex justify-content-center">
   <canvas id="chartId" aria-label="chart" heigth="720" width="1080"></canvas>
</div>

<div class= "d-flex justify-content-center">

   <p>Showing last {{records}} records</p>

</div>

   
   <script>
      var chrt = document.getElementById("chartId").getContext("2d");
      
      var chartId = new Chart(chrt, {
         type: '{{cType}}',
         data: {
            labels: [{%for data in x_data%}'{{data}}',{%endfor%}],
            datasets: [{
               label: "{{lable}}",
               data: [{%for data in y_data%}'{{data}}',{%endfor%}],
               backgroundColor: ['yellow', 'aqua', 'pink', 'lightgreen', 'lightblue', 'gold'],
               borderColor: ['black'],
               borderWidth: 2,
               pointRadius: 5,
            }],
         },
         options: {
            responsive: false,
         },
      });
   </script>









<div class="chart-control-container">

   <form action=""  method="POST" >
      {% csrf_token %}
      <table>
      <thead>
          
          <th>Select Chart Type: </th>
          <th>X-axis:</th>
          <th>Y-axis:</th>
          <th>Show Records:</th>
          <th></th>
          
      </thead>
   
      <tbody>
   
       
      <tr>  
        
          <td> 
         <select id="chartType" name="chartType" class="form-control">
         <option value="line">Line Chart</option>
         <option value="scatter">Scatter Chart</option>
         <option value="bar">Bar Chart</option>
         <option value="pie">pie Chart</option>
         <option value="doughnut">Doughnut Chart</option>
         
        
         </select>
          </td>  
           <td>  
         <select id="X-axis" name="X-axis" class="form-control" >
         <option value="open" >open</option>
         <option value="date">date</option>
         <option value="trade_code">trade code</option>
         <option value="high">high</option> 
         <option value="close" select>close</option>
         <option value="close">close</option>
         <option value="volume">volume</option>
        
          </select>
        </td>  
        <td> 
         <select id="Y-axis" name="Y-axis" class="form-control">
         <option value="close">close</option>
         <option value="date">date</option>
         <option value="trade_code">trade code</option>
         <option value="high">high</option>
         <option value="open">open</option>
         <option value="close">close</option>
         <option value="volume">volume </option>
         
           </select>
        </td>
        <td> 
          <input type="number" name="records" class="form-control" placeholder="Enter number here" min="0">
        </td>
        

        <td>
         <div class="d-flex justify-content-center">
            <button type="submit" class="btn btn-primary btn-sm btn-block ">Show</button>  
         </div>
      </td>  
        </tr>   
      
      </tbody>
     
   
   
      </table>
   
   </form>   
</div>


<hr>


<div class="data-table-container">


   <div class="col-md-12">
      <span class="add-btn d-flex justify-content-end"><a href="{% url 'addnew' %}" class="btn btn-primary">Add New Record</a></span>  
      <div class="table-responsive">
      <table id="bootstrapdatatable" class="table table-striped table-bordered table-hover" width="100%">
      <thead >
          
          <th>Date</th>
          <th>Trade code</th>
          <th>High</th>
          <th>Low</th>
          <th>Open</th>
          <th>Close</th>
          <th>Volume</th>
          <th>Edit</th>
          <th>Delete</th>
      </thead>
      <tbody>
   
  
     
      {% for data in market_data %}
       
      <tr>  
        
        <td>{{ data.date }}</td>  
        <td>{{ data.trade_code }}</td>  
        <td>{{ data.high }}</td>  
        <td>{{ data.low }}</td>
        <td>{{ data.open }}</td>
        <td>{{ data.close }}</td>
        <td>{{ data.volume }}</td>  
        <td><a href="/edit/{{ data.id }}" class="btn btn-primary">Edit</a></td>
        <td><a href="/delete/{{ data.id }}" class="btn btn-danger">Delete</a></td>  
        </tr>   
       
  
      {% endfor %}
  
     
  
  
      </table>
  
     
  
    
      
  </div>
  


</div>










{% endblock body %}